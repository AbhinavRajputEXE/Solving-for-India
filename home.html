<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Roboto:wght@300;400;500;700;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/x-icon" href="images/favicon.png">
  <title>KhetiFy</title>
</head>

<body>
  <header class="header">
    <nav class="navbar">
      <a href="#" class="nav-logo">
        <img class="logo" src="images/logo.png" alt="">
      </a>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="https://khetify-community.vercel.app/" class="nav-link" target="_blank">Community</a>
        </li>
        <li class="nav-item">
          <a href="#about" class="nav-link">About</a>
        </li>
        <li class="nav-item">
          <a href="Contact/index.html" class="nav-link">Feedback</a>
        </li>
        <li class="nav-item">
          <a href="#footer" class="nav-link">Contact</a>
        </li>
        <div class="icons">

          <!-- Weather Widget -->

          <li class="nav-item" id="weather">
            <a href="#"><img class="weather" src="images/weather.png" alt=""></a>
            <div class="popup">
              <div class="popup-content">
                <div id="mainBody">
                  <div class="container">
                    <div class="search-box">
                      <i class="fa-solid fa-location-dot"></i>
                      <input id="search-field" type="text" placeholder="Enter your location">
                      <button class="fa-solid fa-magnifying-glass" id="weatherButton"></button>
                    </div>
                    <div class="not-found">
                      <img src="images/404.png" alt="">
                      <p>
                        Location not Found
                      </p>
                    </div>
                    <div class="weather-box">
                      <img src="">
                      <p class="temperature"></p>
                      <p class="description"></p>
                    </div>
                    <div class="weather-details">
                      <div class="humidity">
                        <i class="fa-solid fa-water"></i>
                        <div class="text">
                          <span></span>
                          <p>humidity</p>
                        </div>
                      </div>
                      <div class="wind">
                        <i class="fa-solid fa-wind"></i>
                        <div class="text">
                          <span></span>
                          <p>Wind Speed</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>

          <!-- Language widget -->

          <div class="popup-overlay"></div>
          <li class="nav-item" id="langLink">
            <a href="#"><img class="lang" src="images/lang.png" alt=""></a>
            <div id="langPop">
              <div class="popup-buttons">
                <button class="english"><a href="home.html" class="langBtn">English</a></button>
                <button class="hindi"><a href="hindi_home.html" class="langBtn">हिंदी </a></button>
              </div>
            </div>
          </li>
          <!-- <h2 id="name"></h2> -->
          <!-- <img id ="image"/> -->
          <!-- <button onclick="logout()">logout</button> -->

          <!-- Loguout widget -->

          <li class="nav-item popup-link-1">
            <a href="#"><img class="priflileImg" src="images/profile.png" alt=""></a>
            <div class="popup-card-1">
              <img id="image" alt="Profile Image" class="profile-image-1">
              <h3 class="name-1" id="name"></h3>
              <button class="logout-btn-1" onclick="logout()">Logout</button>
            </div>
          </li>
        </div>

      </ul>
      <div class="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </nav>
  </header>


  <!-- Landing Page -->


  <section class="landing">
    <div>
      <div class="cow"><img src="images/cow.png" alt=""></div>
      <h1 class="title">Kheti<span class="span">Fy</span></h1>
      <p class="landingText">“<span class="span">Cultivate</span> the land, <span class="span">harvest</span> a future"
      </p>
    </div>
  </section>


  <!-- aboutSection -->


  <section class="about" id="about">
    <h1 class="aboutTitle reveal">About</h1>
    <p class="aboutText reveal">
      Welcome to our website dedicated to agriculture technology and farming! We are committed to providing innovative
      solutions that help farmers manage their farms more efficiently and effectively. Our platform offers a range of
      tools and resources, including crop management systems, weather forecasting, and market analysis, to help farmers
      optimize their yields and improve their profitability. In addition, we provide a marketplace for farmers to sell
      their crops and vegetables directly to consumers, cutting out the middlemen and ensuring fair prices for both
      parties. Join us in embracing the future of farming and growing together!
    </p>
    <div class="searchContainer">
      <h2 class="searchText">Learn about what you want to grow....</h2>
      <form>
        <input type="text" placeholder="Enter a crop name..." id="cropSearch">
        <a href="#" id="searchCropbar">Search</a>
        <div id="searchPop">
          <div id="popupContent">
            <div id="popupTitle"></div>
            <div id="popupDetails"></div>
            <div id="closeButton" onclick="closePopup()">&times;</div>
          </div>
        </div>
      </form>
    </div>
  </section>


  <!-- manageSection -->


  <section class="manage">
    <div class="managediv reveal">
      <h3 class="titlePosition2">Manage your Farm!</h3>
      <!-- <button class="button" onclick="showInventory()">View Inventory</button>
              <button class="button" onclick="showChat()">Community Chat</button> -->
      <nav class=buttonDesign>
        <ul>
          <li class="viewButton">
            <div class="button-contenttt" id="inventoryButton">
              View Inventory
            </div>
            <span></span><span></span><span></span><span></span>
          </li>
          <li class="chatButton" onclick="showChat()">
            <div class="button-contenttt" onclick="window.open(`https://khetify-community.vercel.app/`,'mywindow');">
              Community Chat
            </div>
            <span></span><span></span><span></span><span></span>
          </li>
        </ul>
      </nav>
    </div>
  </section>


  <!-- StatsSection -->


  <section class="stats">
    <div class="stats1">
      <canvas id="myChart"></canvas>
    </div>
  </section>


  <!-- About team -->


  <section class="meetTeam">
    <button class="teamBtn" style="vertical-align:middle"
      onclick="window.location.href = 'about/index.html';"><span>Meet the team </span></button>
  </section>


  <!-- popup caht -->


  <a href="https://chat-gpt-eight-gold.vercel.app/" target="_blank">
    <div class="bubble">
      <div class="bubble-icon">
        <img src="images/comment.svg" alt="">
        Chat with Ai
      </div>
    </div>
  </a>


  <!-- footerSection -->
  <section class="foot" id="footer">
    <footer class="footer">
      <div class="waves">
        <div class="wave" id="wave1"></div>
        <div class="wave" id="wave2"></div>
        <div class="wave" id="wave3"></div>
        <div class="wave" id="wave4"></div>
      </div>
      <ul class="social-icon">
        <li class="social-icon__item"><a class="social-icon__link" href="mailto:solvingforindiagfg@gmail.com"
            target="_blank">
            <ion-icon name="mail-outline"></ion-icon>
          </a></li>
        <li class="social-icon__item"><a class="social-icon__link"
            href="https://twitter.com/Khetify_?t=AZL4iuIA_3RM6S8SHgj4OA&s=08" target="_blank">
            <ion-icon name="logo-twitter"></ion-icon>
          </a></li>
        </a></li>
        <li class="social-icon__item"><a class="social-icon__link"
            href="https://www.instagram.com/kheti.fy/?igshid=ZDdkNTZiNTM%3D" target="_blank">
            <ion-icon name="logo-instagram"></ion-icon>
          </a></li>
      </ul>
      <ul class="menu">
        <li class="menu__item"><a class="menu__link" href="#">Home</a></li>
        <li class="menu__item"><a class="menu__link" href="#about">About</a></li>
        <li class="menu__item"><a class="menu__link" href="Contact/index.html">Feedback</a></li>

      </ul>
      <p>&copy;2023 KhetiFy | All Rights Reserved</p>
    </footer>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  </section>

  <!-- JAVASCRIPTS -->

  <script src="https://kit.fontawesome.com/d567ec31b5.js" crossorigin="anonymous"></script>
  <script src="js/script.js"></script>
  <script>
    let params = {}
    let regex = /([^&=]+)=([^&]*)/g, m;
    while (m = regex.exec(location.href)) {
      params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
    }
    if (Object.keys(params).length > 0) {
      localStorage.setItem('authInfo', JSON.stringify(params))
    }

    window.history.pushState({}, document.title, "/" + "home.html");

    let info = JSON.parse(localStorage.getItem('authInfo'));
    console.log(JSON.parse(localStorage.getItem('authInfo')))
    console.log(info['access_token'])
    console.log(info['expired_in'])

    let sub;
    fetch("https://www.googleapis.com/oauth2/v3/userinfo", {
      headers: {
        "Authorization": `Bearer ${info['access_token']}`
      }
    })
      .then((data) => data.json())
      .then((info) => {
        console.log(info)
        document.getElementById('name').innerHTML += info.name
        document.getElementById('image').setAttribute('src', info.picture)
        sub = info.sub;
      })

    function logout() {
      fetch("https://oauth2.googleapis.com/revoke?token=" + info['access_token'], {
        method: 'POST',
        headers: {
          'Content-type': 'application/x-www-form-urlencoded'
        }
      })
        .then((data => {
          localStorage.removeItem('userEmail');
          location.href = "https://khetify.netlify.app/index.html"
        }))
    }

    const inventoryButton = document.getElementById('inventoryButton');
    inventoryButton.addEventListener('click', function () {
      window.open(`https://khetify-inventory.vercel.app/${encodeURIComponent(sub.toString())}`, 'mywindow');
    });
    console.log(typeof (sub));
    if (!info || !info['access_token']) {
      window.open('https://khetify.netlify.app/');
    }
  </script>

</body>

</html>